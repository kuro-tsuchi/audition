"use strict";(self.webpackChunkaudition=self.webpackChunkaudition||[]).push([[402],{9675:(e,l,a)=>{a.r(l),a.d(l,{data:()=>i});const i={key:"v-09da737e",path:"/distributed/elasticSearch.html",title:"1. ElasticSearch",lang:"en-EN",frontmatter:{},excerpt:"",headers:[{level:2,title:"1.1. es是什么",slug:"_1-1-es是什么",children:[{level:3,title:"1.1.1. 定义",slug:"_1-1-1-定义",children:[]},{level:3,title:"1.1.2. 核心概念",slug:"_1-1-2-核心概念",children:[]},{level:3,title:"1.1.3. 使用场景",slug:"_1-1-3-使用场景",children:[]}]},{level:2,title:"1.2. 如何进行中文分词？用过哪些分词器？",slug:"_1-2-如何进行中文分词-用过哪些分词器",children:[]},{level:2,title:"1.3. ES写入数据的工作原理是什么？",slug:"_1-3-es写入数据的工作原理是什么",children:[]},{level:2,title:"1.4. ES查询数据的工作原理是什么？",slug:"_1-4-es查询数据的工作原理是什么",children:[]}],filePathRelative:"distributed/elasticSearch.md",git:{updatedTime:1646088479e3,contributors:[{name:"shorestraydog",email:"shorestraydog@protonmail.com",commits:2}]}}},4098:(e,l,a)=>{a.r(l),a.d(l,{default:()=>x});var i=a(6252),r=a(5424);const n=(0,i._)("h1",{id:"_1-elasticsearch",tabindex:"-1"},[(0,i._)("a",{class:"header-anchor",href:"#_1-elasticsearch","aria-hidden":"true"},"#"),(0,i.Uk)(" 1. ElasticSearch")],-1),t=(0,i._)("h2",{id:"_1-1-es是什么",tabindex:"-1"},[(0,i._)("a",{class:"header-anchor",href:"#_1-1-es是什么","aria-hidden":"true"},"#"),(0,i.Uk)(" 1.1. es是什么")],-1),d=(0,i._)("h3",{id:"_1-1-1-定义",tabindex:"-1"},[(0,i._)("a",{class:"header-anchor",href:"#_1-1-1-定义","aria-hidden":"true"},"#"),(0,i.Uk)(" 1.1.1. 定义")],-1),s=(0,i._)("p",null,"es(elasticsearch)是一个基于lucene的, 高扩展,开源的全文检索和分析引擎,它可以准实时地快速存储,搜索,分析海量的数据.",-1),h=(0,i._)("h3",{id:"_1-1-2-核心概念",tabindex:"-1"},[(0,i._)("a",{class:"header-anchor",href:"#_1-1-2-核心概念","aria-hidden":"true"},"#"),(0,i.Uk)(" 1.1.2. 核心概念")],-1),_=(0,i._)("ol",null,[(0,i._)("li",null,"索引 index:关系型数据库中的 table"),(0,i._)("li",null,"文档 document:row"),(0,i._)("li",null,"字段 field text\\keyword\\byte: 列"),(0,i._)("li",null,"映射Mapping:Schema."),(0,i._)("li",null,"查询方式 DSL: SQL ES的新版本也支持SQL"),(0,i._)("li",null,"分片 sharding 和 副本 replicas: index都是由sharding组成的.每个sharding都有一个或多个备份. ES集群健康状态")],-1),c=(0,i._)("h3",{id:"_1-1-3-使用场景",tabindex:"-1"},[(0,i._)("a",{class:"header-anchor",href:"#_1-1-3-使用场景","aria-hidden":"true"},"#"),(0,i.Uk)(" 1.1.3. 使用场景")],-1),u=(0,i._)("p",null,"ES可以用在大数据量的搜索场景下, ES也有很强大的计算能力",-1),o=(0,i._)("h2",{id:"_1-2-如何进行中文分词-用过哪些分词器",tabindex:"-1"},[(0,i._)("a",{class:"header-anchor",href:"#_1-2-如何进行中文分词-用过哪些分词器","aria-hidden":"true"},"#"),(0,i.Uk)(" 1.2. 如何进行中文分词？用过哪些分词器？")],-1),g=(0,i._)("p",null,"IK分词器。",-1),p=(0,i._)("h2",{id:"_1-3-es写入数据的工作原理是什么",tabindex:"-1"},[(0,i._)("a",{class:"header-anchor",href:"#_1-3-es写入数据的工作原理是什么","aria-hidden":"true"},"#"),(0,i.Uk)(" 1.3. ES写入数据的工作原理是什么？")],-1),b=(0,i._)("p",null,[(0,i._)("img",{src:r,alt:"picture 7"})],-1),f=(0,i._)("ol",null,[(0,i._)("li",null,"客户端发写数据的请求时，可以发往任意节点。这个节点就会成为coordinating node协调节点。"),(0,i._)("li",null,"计算的点文档要写入的分片：计算时就采用hash取模的方式来计算。"),(0,i._)("li",null,"协调节点就会进行路由，将请求转发给对应的primary sharding所在的datanode。"),(0,i._)("li",null,"datanode节点上的primary sharding处理请求，写入数据到索引库，并且将数据同步到对应的replica sharding"),(0,i._)("li",null,"等primary sharding 和 replica sharding都保存好了文档之后, 返回客户端响应")],-1),m=(0,i._)("h2",{id:"_1-4-es查询数据的工作原理是什么",tabindex:"-1"},[(0,i._)("a",{class:"header-anchor",href:"#_1-4-es查询数据的工作原理是什么","aria-hidden":"true"},"#"),(0,i.Uk)(" 1.4. ES查询数据的工作原理是什么？")],-1),S=(0,i._)("ol",null,[(0,i._)("li",null,"客户端发请求可发给任意节点，这个节点就成为协调节点"),(0,i._)("li",null,"协调节点将查询请求广播到每一个数据节点，这些数据节点的分片就会处理改查询请求。"),(0,i._)("li",null,"每个分片进行数据查询，将符合条件的数据放在一个队列当中，并将这些数据的文档ID、节点信息、分片信息都返回给协调节点。"),(0,i._)("li",null,"由协调节点将所有的结果进行汇总，并排序。"),(0,i._)("li",null,"协调节点向包含这些文档ID的分片发送get请求，对应的分片将文档数据返回给协调节点，最后协调节点将数据整合返回给客户端。")],-1),k={},x=(0,a(3744).Z)(k,[["render",function(e,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[n,t,d,s,h,_,c,u,o,g,p,b,f,m,S],64)}]])},3744:(e,l)=>{l.Z=(e,l)=>{const a=e.__vccOpts||e;for(const[e,i]of l)a[e]=i;return a}},5424:(e,l,a)=>{e.exports=a.p+"assets/img/1644571122372.626be6b6.png"}}]);